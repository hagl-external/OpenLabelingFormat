{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://github.com/ADAS-API/OpenLabelFormat/blob/master/schema.json",
    "type": "object",
    "title": "OpenLabelFormat",
    "description": "Created with Liquid Studio 2019 (https://www.liquid-technologies.com)",
    "additionalProperties": false,
    "properties": {
        "version": {
            "type": "string",
            "description": "Version of label file as string"
        },
        "lastChange": {
            "type": "string",
            "description": "Last change of label file"
        },
        "coordinateSystem": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "unit": {
                    "type": "string"
                },
                "gramSchmidtU": {
                    "$ref": "#/definitions/coordinate3D"
                },
                "gramSchmidtV": {
                    "$ref": "#/definitions/coordinate3D"
                }
            },
            "required": [
                "gramSchmidtU",
                "gramSchmidtV",
                "unit"
            ]
        },
        "mediaInfo": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "url": {
                    "type": "string"
                },
                "type": {
                    "type": "string"
                },
                "uuid": {
                    "type": "string"
                }
            },
            "required": [
                "uuid",
                "type",
                "url"
            ]
        },
        "calibrationInfo": {
            "type": "string"
        },
        "odometryInfo": {
            "type": "string"
        },
        "localizationInfo": {
            "type": "string"
        },
        "metaInfo": {
            "type": "array",
            "items": {
                "$ref": "#/definitions/annotation"
            }
        },
        "objects": {
            "type": "array",
            "items": {
                "$ref": "#/definitions/object"
            }
        }
    },
    "required": [
        "version",
        "lastChange",
        "coordinateSystem",
        "mediaInfo",
        "calibrationInfo",
        "odometryInfo",
        "localizationInfo",
        "metaInfo",
        "objects"
    ],
    "definitions": {
        "temporalValidity": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "start": {
                    "type": "number"
                },
                "end": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            },
            "required": [
                "start",
                "end",
                "unit"
            ]
        },
        "coordinate2D": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "x": {
                    "type": "number"
                },
                "y": {
                    "type": "number"
                }
            },
            "required": [
                "x",
                "y"
            ]
        },
        "coordinate3D": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "x": {
                    "type": "number"
                },
                "y": {
                    "type": "number"
                },
                "z": {
                    "type": "number"
                }
            },
            "required": [
                "x",
                "y",
                "z"
            ]
        },
        "shape2D": {
            "type": "object",
            "additionalProperties": false,
            "required": [],
            "anyOf": [
                {
                    "additionalProperties": false,
                    "properties": {
                        "line2D": {
                            "type": "object",
                            "additionalProperties": false,
                            "properties": {
                                "min": {
                                    "$ref": "#/definitions/coordinate2D"
                                },
                                "max": {
                                    "$ref": "#/definitions/coordinate2D"
                                }
                            },
                            "required": [
                                "max",
                                "min"
                            ]
                        }
                    }
                },
                {
                    "additionalProperties": false,
                    "properties": {
                        "box2D": {
                            "type": "object",
                            "additionalProperties": false,
                            "properties": {
                                "min": {
                                    "$ref": "#/definitions/coordinate2D"
                                },
                                "max": {
                                    "$ref": "#/definitions/coordinate2D"
                                }
                            },
                            "required": [
                                "max",
                                "min"
                            ]
                        }
                    }
                },
                {
                    "additionalProperties": false,
                    "properties": {
                        "points2D": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/coordinate2D"
                            }
                        }
                    }
                },
                {
                    "additionalProperties": false,
                    "properties": {
                        "mask2D": {
                            "type": "string",
                            "description": "Run-length encoded (RLE)"
                        }
                    }
                },
                {
                    "additionalProperties": false,
                    "properties": {
                        "polyLine2D": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/coordinate2D"
                            }
                        }
                    }
                },
                {
                    "additionalProperties": false,
                    "properties": {
                        "polygon2D": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/coordinate2D"
                            }
                        }
                    }
                },
                {
                    "additionalProperties": false,
                    "properties": {
                        "ellipse2D": {
                            "type": "object",
                            "additionalProperties": false,
                            "properties": {
                                "center": {
                                    "$ref": "#/definitions/coordinate2D"
                                },
                                "semi-major": {
                                    "type": "number"
                                },
                                "semi-minor": {
                                    "type": "number"
                                }
                            },
                            "required": [
                                "center",
                                "semi-major",
                                "semi-minor"
                            ]
                        }
                    }
                }
            ]
        },
        "shape3D": {
            "type": "object",
            "additionalProperties": false,
            "required": [],
            "anyOf": [
                {
                    "additionalProperties": false,
                    "properties": {
                        "plane3D": {
                            "type": "object",
                            "description": "Defines a plane from 3 vectors",
                            "additionalProperties": false,
                            "properties": {
                                "vectorP": {
                                    "$ref": "#/definitions/coordinate3D"
                                },
                                "vectorU": {
                                    "$ref": "#/definitions/coordinate3D"
                                },
                                "vectorV": {
                                    "$ref": "#/definitions/coordinate3D"
                                }
                            },
                            "required": [
                                "vectorV",
                                "vectorU",
                                "vectorP"
                            ]
                        }
                    },
                    "required": []
                },
                {
                    "additionalProperties": false,
                    "properties": {
                        "points3D": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/coordinate3D"
                            }
                        }
                    }
                },
                {
                    "additionalProperties": false,
                    "properties": {
                        "box3D": {
                            "type": "object",
                            "additionalProperties": false,
                            "properties": {
                                "min": {
                                    "$ref": "#/definitions/coordinate3D"
                                },
                                "max": {
                                    "$ref": "#/definitions/coordinate3D"
                                }
                            },
                            "required": [
                                "max",
                                "min"
                            ]
                        }
                    }
                }
            ]
        },
        "relation": {
            "type": "object",
            "additionalProperties": false,
            "anyOf": [
                {
                    "additionalProperties": false,
                    "properties": {
                        "parentOfUUID": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "parentOfUUID"
                    ]
                },
                {
                    "additionalProperties": false,
                    "properties": {
                        "siblingOfUUID": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "siblingOfUUID"
                    ]
                },
                {
                    "additionalProperties": false,
                    "properties": {
                        "childOfUUID": {
                            "type": "string"
                        }
                    },
                    "required": [
                        "childOfUUID"
                    ]
                }
            ]
        },
        "annotationInfo": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "id": {
                    "type": "integer"
                },
                "uuid": {
                    "type": "string"
                },
                "mediaReference": {
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                        "uuid": {
                            "type": "string"
                        },
                        "validity": {
                            "$ref": "#/definitions/temporalValidity"
                        }
                    },
                    "required": [
                        "validity",
                        "uuid"
                    ]
                },
                "relation": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/relation"
                    }
                }
            },
            "required": [
                "mediaReference",
                "uuid",
                "id"
            ]
        },
        "annotation": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "annotationName": {
                    "type": "string"
                },
                "annotationType": {
                    "type": "string"
                },
                "annotationInfo": {
                    "$ref": "#/definitions/annotationInfo"
                }
            },
            "required": [
                "annotationInfo",
                "annotationType",
                "annotationName"
            ]
        },
        "object": {
            "type": "object",
            "additionalProperties": false,
            "anyOf": [
                {
                    "additionalProperties": false,
                    "properties": {
                        "object2D": {
                            "type": "object",
                            "additionalProperties": false,
                            "properties": {
                                "objectShape2D": {
                                    "$ref": "#/definitions/shape2D"
                                },
                                "objectMeta": {
                                    "$ref": "#/definitions/annotation"
                                }
                            },
                            "required": [
                                "objectShape2D",
                                "objectMeta"
                            ]
                        }
                    }
                },
                {
                    "additionalProperties": false,
                    "properties": {
                        "object3D": {
                            "type": "object",
                            "additionalProperties": false,
                            "properties": {
                                "objectShape3D": {
                                    "$ref": "#/definitions/shape3D"
                                },
                                "objectMeta": {
                                    "$ref": "#/definitions/annotation"
                                }
                            },
                            "required": [
                                "objectShape3D",
                                "objectMeta"
                            ]
                        }
                    }
                }
            ]
        }
    }
}